<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reasignacion</title>
  <!--  bostrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!--DataTable-->
  <link rel="stylesheet" href="https://cdn.datatables.net/2.0.1/css/dataTables.dataTables.min.css">
  <!--Font Awesome-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!--Custom CSS-->
  <link rel="stylesheet" href="../static/css/style.css">
</head>
<header>
  <div class="header" id="id_header">
    <div class="logoGep">
      <img class="logoGep" src="../static/img/LogoGEP-negro.jpg" alt="grupo empresarial proteccion">
      <h1 id="nombreUsuario">Bienvenido:‎{{nombre}}</h1>
    </div>

    <div class="botones-header">



      {{boton | safe}}

      <!-- <a href="#" type="button" id="btn-seccion" class="#"><strong>Autorización</strong></a>
            <a href="#" type="button" id="btn-seccion" class="#"><strong>Reasignación</strong></a> -->
    </div>
  </div>
</header>

<body>

  <div class="cuadrado"></div>
  <div class="cuadrado2"></div>
  <div class="cuadrado3"></div>
  <div class="cuadrado4"></div>




  <div class="title-one">
    <h1 class="title-reasigna" id="">Consulta y Actualizacion de Servicios</h1>
  </div>


  <form action="/procesar_busqueda" method="post">
    <div class="input-group mb-3">
      <input type="text" class="form-control" name="numeroDato" id="custom-input"
        placeholder="Digite el numero de servicio" aria-label="Recipient's username" aria-describedby="button-addon2"
        required>
      <input class="btn btn-outline-secondary" type="submit" value="Buscar" id="button-addon2">
    </div>
  </form>

  <div class="table-consult">
    <table class="table">
      <thead>
        <tr>
          <th scope="col"># Servicio</th>
          <th scope="col">Estado</th>
          <th scope="col">Profesional</th>
          <th scope="col">__</th>
          <!-- <th scope="col">Handle</th> -->
        </tr>
      </thead>
      <tbody>

        <tr>
          <td>{{dato0}}</td>
          <td>{{dato2}}</td>
          <td>{{dato1}}</td>
          <td>{{update_btn | safe }}</td>
        </tr>


      </tbody>

    </table>
  </div>
  <div class="table-profesional">
    <table class="table custom-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Profesional</th>
        </tr>
      </thead>
      <tbody>
        {% for row in profesional %}
        <tr>
          <td>{{ row[0] }}</td>
          <td>{{ row[1] }}</td>

        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="img-grafica"><img src="../static/img/grafica.jpg" alt=""></div>
  <button type="button" onclick="verhistoryindex()" id="btn-history" class="btn btn-outline-primary btn-history">Ver
    Historial</button>

  <div class="table-history-false" id="table-history-false">
    <h1 class="title-history">Historial de Reasignaciones</h1>
    <table class=" table  table-striped custom-table tone">
      <thead class="thead-reasigna">
        <tr>
          <th style="color:black;">#</th>
          <th style="color:black;">Servicio</th>
          <th style="color:black;">Reasignacion</th>
          <th style="color:black;">Profesional Anterior</th>
          <th style="color:black;">Profesional Final</th>
          <th style="color:black;">Fecha</th>
          <th style="color:black;">Usuario</th>

        </tr>

      </thead>
      <tbody>
        {% for row in data %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{row[0]}}</td>
          <td>{{row[2]}}</td>
          <td>{{row[4]}}</td>
          <td>{{row[5]}}</td>
          <td><strong></strong>{{row[3]}}</strong></td>
          <td>{{row[1]}}</td>

        </tr>
        {% endfor %}

      </tbody>
    </table>



  </div>


  <div class="font-iframe">
    <img src="../static/img/cancelar.png" id="close1" onclick="cerrarView()" class="close">
    <iframe src="./update" class="iframe1" id="iframe1" frameborder="0"></iframe>
  </div>

  <div class="wrap">
    <!-- Repeated 64 times -->
    <div class="square">
      <div class="inner"></div>
    </div>
    <!-- End of repeated section -->
  </div>

  <div class="font-preload" id="font-preload">
    <h1 class="preload">
      <span class="let1">C</span>
      <span class="let2">A</span>
      <span class="let3">R</span>
      <span class="let4">G</span>
      <span class="let5">A</span>
      <span class="let6">N</span>
      <span class="let7">D</span>
      <span class="let8">O</span>

    </h1>
  </div>
  <!--  bostrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <!-- JQuery-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <!-- DataTable -->
  <script src="https://cdn.datatables.net/2.0.1/js/dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/2.0.1/js/dataTables.bootstrap5.min.js"></script>
  <script src="../static/js/style.js"></script>
  <script type="text/javascript">
    $(document).ready(function () {
      $('.tone').DataTable();
    });
    window.addEventListener('message', function (event) {
      if (event.data === 'recargar') {
        setTimeout(function () {
          window.location.reload();
        }, 500);
      }
    });

    window.addEventListener('load', function () { //evento para le preloader 
      var loader = document.getElementById('font-preload');
      setTimeout(function () {
        loader.style.display = "none";
      }, 2000)
    })
  </script>
</body>

</html>