<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link rel="icon" href="../static/img/IconoGEP.png" type="img/png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--  bostrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!--DataTable-->
  <link rel="stylesheet" href="https://cdn.datatables.net/2.0.1/css/dataTables.dataTables.min.css">
  <!--Font Awesome-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!--Custom CSS-->
  <link rel="stylesheet" href="../../static/css/Welcome/welcome.css">

  <title>Paquete de Bienvenida</title>
</head>

<body>

  <header class="header">
    <div class="cont-header"></div>
    <div id="separador" class="separador"></div>
    <div class="img-header"><img src="../../static/img/Logo Real.png" alt=""></div>
    <div class="navbar">
      <ul>
        <li><a href="http://127.0.0.1:5000/index">Inicio</a></li>
        <li><a href="">Opcionsi</a>
          <ul>
            <li><a href="">Opcion 1</a></li>
            <li><a href="">Opcion 2</a></li>
            <li><a href="">Opcion 3</a></li>
            <li><a href="">Opcion 4</a></li>
          </ul>
        </li>
        <li><a href="">Herramientas</a>
          <ul>
            <li><a href="">Opcion 1</a></li>
            <li><a href="">Opcion 2</a></li>
            <li><a href="">Opcion 3</a></li>
            <li><a href="">Cerrar Sesion</a></li>
          </ul>
        </li>
        <li><a href="logout" class="close">Salir</a></li>
      </ul>
    </div>
  </header>


  <div class="grafica"><img src="../../static/img/grafica.jpg" alt=""></div>
  <div class="cont-form">
    <h1 class="txt-cont">Paquete de <br> Bienvenida GEP</h1>
    <form action="/welcomeaf" method="post">
      <div class="input-group mb-3 form-one">
        <p class="btn-fecha" onclick="abrirporfecha()">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="orangered" class="bi bi-funnel"
            viewBox="0 0 16 16">
            <path
              d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2h-11z" />
          </svg>
        </p>
        <input type="date" class="input-group mb-3 fecha-input" id="fecha-input" name="fechacont">
        <input type="text" class="form-control " name="contrato"
          placeholder="Busque por medio de su numero de identificación o contrato" aria-label="Recipient's username">
        <input class="btn btn-warning" type="submit" id="button-addon2" value="Buscar">
      </div>
    </form>
    {{alerta | safe}}
    {{alertatruecorreo | safe}}
    <button type="button" onclick="activarallchecks()" style="background-color: transparent; border: none; position: relative;
    margin-right: 100%;z-index: 2;">

      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check2-all"
        viewBox="0 0 16 16">
        <path
          d="M12.354 4.354a.5.5 0 0 0-.708-.708L5 10.293 1.854 7.146a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0zm-4.208 7-.896-.897.707-.707.543.543 6.646-6.647a.5.5 0 0 1 .708.708l-7 7a.5.5 0 0 1-.708 0" />
        <path d="m5.354 7.146.896.897-.707.707-.897-.896a.5.5 0 1 1 .708-.708" />
      </svg>
    </button>
    <table class="table1 table-smaller table-hover">
      <thead>
        <tr>

          <th>Nombre</th>
          <th>Apellido</th>
          <th>Documento</th>
          <th>Contrato</th>
          <th>Correo</th>
          <th>Caratula</th>
          <th>Clausula Juridica</th>
          <th>Clausula Exequial</th>
          <th>Brochure</th>
          <th style="display: none;">a</th>
          <th style="display: none;">b</th>
          <th style="display: none;">c</th>
          <th style="display: none;">d</th>
          <th style="display: none;">e</th>
          <th style="display: none;"></th>
          <th style="display: none;"></th>
          <th style="display: none;"></th>




        </tr>
      </thead>
      <tbody>
        {%for i in consultaraf%}
        <tr>
          <td>{{i[0]}}</td>
          <td>{{i[1]}}</td>
          <td>{{i[2]}}</td>
          <td>{{i[3]}}</td>
          <td>{{i[4]}}</td>
          <form action="/downpdf" method="post">
            <td><input type="checkbox" name="contratopdf"></td>
            <td>
              <div class="select-clausulas">
                <select class="select-clausulas" name="clausulas">
                  <div class="opciones-select">
                    <option value="Juri_Psico">50%</option>
                    <option value="Juri_Psico80">80%</option>
                    <option value="Juri_Psico100">100%</option>
                  </div>
                </select>
              </div>
            </td>
            <td><input type="checkbox" name="tarjetapdf"></td>
            <td><input type="checkbox" name="brochurepdf"></td>
            <td>
              <button type="button" onclick="activarchecksfila(this)"
                style="background-color: transparent; border: none;">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-check2-all" viewBox="0 0 16 16">
                  <path
                    d="M12.354 4.354a.5.5 0 0 0-.708-.708L5 10.293 1.854 7.146a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0zm-4.208 7-.896-.897.707-.707.543.543 6.646-6.647a.5.5 0 0 1 .708.708l-7 7a.5.5 0 0 1-.708 0" />
                  <path d="m5.354 7.146.896.897-.707.707-.897-.896a.5.5 0 1 1 .708-.708" />
                </svg>
              </button>
            </td>

            <td><input type="text" name="contratopordebajo" value="{{i[3]}}" style="display: none;"></td>
            <td><input type="text" name="nombreaf" value="{{i[0]}}" style="display: none;"></td>
            <td><input type="hidden" name="contrato" value="{{ contrato }}"></td>
            <td><input type="text" name="emailaf" value="{{i[4]}}" style="display: none;"></td>
            <td>{{btndown | safe}}</td>
            <td>{{btnsend | safe}}</td>
            <td>{{btnrecordacion | safe}}</td>
          </form>
        </tr>
        {% endfor %}

      </tbody>
    </table>
    <button type="button" onclick="abrirhistorial()" class="btn btn-outline-primary" style="position: relative;
    margin-right: 100%;z-index: 2; height: 100%; width: 120px;font-size: 15px; ">Ver Historial</button>
    <!-- En Welcome.html -->

    <svg viewBox="0 0 100 100" class="svg">
      <path d="M 10,90 Q 50,10 90,90" stroke="#FAB700" stroke-width="5" fill="none" style="opacity: 50%;" />
      <!-- <path d="M 50,0 Q 0,90 10,90" stroke="#EAEAEA" stroke-width="5" fill="none" /> -->
    </svg>
    <svg viewBox="0 0 100 100" class="svg2">

      <path d="M 10,0 Q 50,20 30,90" stroke="#FAB700" stroke-width="5" fill="none" style="opacity: 50%;" />
    </svg>
    <div class="history-down" id="history-down">
      <h1 class="txt-history">Historial de Generación</h1>
      <table class="table">
        <thead>
          <tr>
            <th>Contrato</th>
            <th scope="col">Nombre</th>
            <th scope="col">Apellido</th>
            <th scope="col">Documento</th>
            <th scope="col">Fecha</th>
            <th scope="col">Usuario</th>
            <th scope="col">Beneficiarios</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th>5a21213</th>
            <td>Juan</td>
            <td>Hernandez</td>
            <td>1007103579</td>
            <td>2023-01-11</td>
            <td>Juan.hernandez</td>
            <td>3</td>
          </tr>

        </tbody>
      </table>
    </div>

  </div>
  <!--  bostrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <!-- JQuery-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <!-- DataTable -->
  <script src="https://cdn.datatables.net/2.0.1/js/dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/2.0.1/js/dataTables.bootstrap5.min.js"></script>
  <script>
    const dataTableOptions = {
      lengthMenu: [5, 10, 50],//se usa para configurar hasta cuantos datos puede mostrar
      //scrollX:"2000px", //se usa para colocarle un escrol a la tabla en posicion de X igualmente si se necesita para Y
      columnDefs: [
        { className: "centered", targets: [0, 1, 2] }, //aqui tomara los cambios de la calse centered y la estoy llamando en el archivo style.css y se aplicara en las posiciones del 0 al 4
        { orderable: false, targets: [5, 6, 7, 8] }, //se utiliza para que las comunas no se puedan ordenar en este caso solo las comunas 6 y 7 en las posiciones 5 y 6
        { width: "2%", targets: [0, 1] },
        { width: "0.1%", targets: [2] }, // para editar el ancho
        { searchable: false, targets: [1] } //se utiliza para que en la barra de busqueda limite la busqueda en una sola columna
      ],
      pageLength: 5, //se usa para mostrar un numero de datos en la tabla
      destroy: true, //para que se destruya la tabla
      language: { //configuracion para cambia el idioma de la tabla las palabras que estan entre "_variable_"  son variables que utiliza la libreria 
        lengthMenu: "Mostrar _MENU_ registros por pagina",
        zeroRecords: "Ningun usuario encontrado",
        info: "Mostrando de _START_ a _END_ de un total de _TOTAL_ resultados",
        infoEmpty: "Ningun usuario encontrado",
        infoFiltered: "(filtrados desde _MAX_ registros totales)",
        search: "Buscar: ",
        loadingRecords: "Cargando ... ",

      }
    };

    $(document).ready(function () {
      $('.table1').DataTable(dataTableOptions);
    });

    $(document).ready(function () {
      $('.table').DataTable();
    });
    function activarallchecks() {
      var checks = document.querySelectorAll('input[type="checkbox"]');
      var areAllChecked = true;

      checks.forEach(function (check) {
        if (!check.checked) {
          areAllChecked = false;
        }
      });

      if (areAllChecked) {
        checks.forEach(function (check) {
          check.checked = false;
        });
      } else {
        checks.forEach(function (check) {
          check.checked = true;
        });
      }
    }
    function activarchecksfila(button) {
      var row = button.closest('tr');
      var checks = row.querySelectorAll('input[type="checkbox"]');
      var isChecked = button.classList.contains('checked');

      checks.forEach(function (check) {
        check.checked = !isChecked;
      });

      button.classList.toggle('checked');
    }
  </script>
  <script src="../../static/js/style.js"></script>
</body>

</html>